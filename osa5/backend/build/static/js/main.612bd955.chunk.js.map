{"version":3,"sources":["components/Blog.js","services/blogs.js","services/login.js","App.js","index.js"],"names":["Blog","blog","title","author","token","getAll","axios","get","then","response","data","create","newObj","a","config","headers","Authorization","console","log","post","update","id","put","setToken","newToken","login","credentials","App","useState","blogs","setBlogs","newBlog","setNewBlog","newAuthor","setNewAuthor","newUrl","setNewUrl","setErrorMessage","username","setUsername","password","setPassword","user","setUser","useEffect","blogService","loggedUserJSON","window","localStorage","getItem","JSON","parse","logoutUser","removeItem","addBlog","newBlogpost","url","alert","handleBlogChange","event","preventDefault","target","value","handleAuthorChange","handleUrlChange","handleLogin","loginService","setItem","stringify","setTimeout","onSubmit","type","name","onChange","userJSON","showUser","onClick","blogForm","map","key","ReactDOM","render","document","getElementById"],"mappings":"2OAOeA,EANF,SAAC,GAAD,IAAGC,EAAH,EAAGA,KAAH,OACX,6BACGA,EAAKC,MADR,IACe,6BADf,gBACsCD,EAAKE,S,gBCAzCC,EAAQ,KA0BG,GAAEC,OApBF,WAEb,OADgBC,IAAMC,IATR,cAUCC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAkBlBC,OAfb,uCAAG,WAAOC,GAAP,iBAAAC,EAAA,6DACRC,EAAS,CACdC,QAAS,CAAEC,cAAeZ,IAE3Ba,QAAQC,IAAI,cAAeN,EAAQE,GAJrB,SAMSR,IAAMa,KAnBd,aAmB4BP,EAAQE,GANrC,cAMRL,EANQ,yBAOPA,EAASC,MAPF,2CAAH,sDAeqBU,OALlB,SAACC,EAAIT,GAEnB,OADgBN,IAAMgB,IAAN,UAxBD,aAwBC,YAAwBD,GAAMT,GAC/BJ,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAGDa,SAxBxB,SAACC,GACjBpB,EAAK,iBAAaoB,KCEJ,GAAEC,MALN,uCAAG,WAAOC,GAAP,eAAAb,EAAA,sEACUP,IAAMa,KAHd,aAG4BO,GAD9B,cACPjB,EADO,yBAENA,EAASC,MAFH,2CAAH,uDCmKIiB,EAjKH,WAAO,IAAD,EACSC,mBAAS,IADlB,mBACVC,EADU,KACHC,EADG,OAEaF,mBAAS,IAFtB,mBAEVG,EAFU,KAEDC,EAFC,OAGiBJ,mBAAS,IAH1B,mBAGVK,EAHU,KAGCC,EAHD,OAIWN,mBAAS,IAJpB,mBAIVO,EAJU,KAIFC,EAJE,OAKuBR,mBAAS,MALhC,mBAKIS,GALJ,aAMeT,mBAAS,IANxB,mBAMVU,EANU,KAMAC,EANA,OAOeX,mBAAS,IAPxB,mBAOVY,EAPU,KAOAC,EAPA,OAQOb,mBAAS,MARhB,mBAQVc,EARU,KAQJC,EARI,KAUhBC,qBAAU,WACRC,EAAYxC,SAASG,MAAK,SAAAqB,GAAK,OAC7BC,EAAUD,QAEZ,IAEHe,qBAAU,WACT,IAAME,EAAiBC,OAAOC,aAAaC,QAAQ,iBACnD,GAAIH,EAAgB,CACnB,IAAMJ,EAAOQ,KAAKC,MAAML,GACxBH,EAAQD,GACRG,EAAYtB,SAASmB,EAAKtC,UAEzB,IAEH,IAAMgD,EAAa,WAClBL,OAAOC,aAAaK,WAAW,iBAC/BV,EAAQ,MACRJ,EAAY,IACZE,EAAY,KA6BPa,EAAU,SAACvB,EAASE,EAAWE,GACpC,IAAMoB,EAAc,CACnBrD,MAAO6B,EACP5B,OAAQ8B,EACRuB,IAAKrB,GAENlB,QAAQC,IAAI,kBAAmBqC,GAC/BV,EAAYlC,OAAO4C,GACnBnB,EAAU,IACVJ,EAAW,IACXE,EAAa,IACbuB,MAAM,cAGDC,EAAmB,SAACC,GACzBA,EAAMC,iBACN5B,EAAW2B,EAAME,OAAOC,QAGnBC,EAAqB,SAACJ,GAC3BA,EAAMC,iBACN1B,EAAayB,EAAME,OAAOC,QAGrBE,EAAkB,SAACL,GACxBA,EAAMC,iBACNxB,EAAUuB,EAAME,OAAOC,QA2ClBG,EAAW,uCAAG,WAAON,GAAP,eAAA9C,EAAA,6DACnB8C,EAAMC,iBADa,kBAGAM,EAAazC,MAAM,CACrCa,WAAUE,aAJQ,OAGbE,EAHa,OAMnBK,OAAOC,aAAamB,QACnB,gBAAiBjB,KAAKkB,UAAU1B,IAEjCG,EAAYtB,SAASmB,EAAKtC,OAC1BuC,EAAQD,GACRH,EAAY,IACZE,EAAY,IAZO,kDAcnBJ,EAAgB,qBAChBgC,YAAW,WACVhC,EAAgB,QACd,KAjBgB,0DAAH,sDAqBhB,OACE,6BACD,kDACU,OAATK,GArHF,0BAAM4B,SAAUL,GACf,wCAEC,2BACAM,KAAK,OACLT,MAAOxB,EACPkC,KAAK,WACLC,SAAU,gBAAGZ,EAAH,EAAGA,OAAH,OAAetB,EAAYsB,EAAOC,WAG7C,wCAEC,2BACAS,KAAK,WACLT,MAAOtB,EACPgC,KAAK,WACLC,SAAU,gBAAGZ,EAAH,EAAGA,OAAH,OAAgBpB,EAAYoB,EAAOC,WAG9C,4BAAQS,KAAK,UAAb,UAmGU,OAAT7B,GAjEc,WAChB,IAAMgC,EAAW3B,OAAOC,aAAaC,QAAQ,iBAC7C,IAAKyB,EACJ,OACC,4CAKF,IAAMC,EAAWzB,KAAKC,MAAMuB,GAC5B,OACC,6BACEC,EAASH,KADX,kBAEC,4BAAQD,KAAK,SAASK,QAASxB,GAA/B,UACA,0BAAMkB,SAAUhB,GAAhB,QAEC,2BACCkB,KAAK,QACLV,MAAO/B,EACP0C,SAAUf,IACT,6BANH,SAQC,2BACCc,KAAK,SACLV,MAAO7B,EACPwC,SAAUV,IACT,6BAZH,MAcC,2BACCS,KAAK,MACLV,MAAO3B,EACPsC,SAAUT,IACT,6BACF,4BAAQO,KAAK,UAAb,UAgCgBM,GACf,qCACChD,EAAMiD,KAAI,SAAA7E,GAAI,OACb,kBAAC,EAAD,CAAM8E,IAAK9E,EAAKoB,GAAIpB,KAAMA,SC5JlC+E,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.612bd955.chunk.js","sourcesContent":["import React from 'react'\r\nconst Blog = ({ blog }) => (\r\n  <div>\r\n    {blog.title} <br/> &nbsp;&nbsp; by {blog.author}\r\n  </div>\r\n)\r\n\r\nexport default Blog\r\n","import axios from 'axios'\nconst baseUrl = '/api/blogs'\n\nlet token = null\n\nconst setToken = (newToken) => {\n\ttoken = `bearer ${newToken}`\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = async (newObj) => {\n\tconst config = {\n\t\theaders: { Authorization: token }\n\t}\n\tconsole.log('at creation', newObj, config)\n\t\n\tconst response = await axios.post(baseUrl, newObj, config)\n\treturn response.data\n}\n\nconst update = (id, newObj) => {\n\tconst request = axios.put(`${baseUrl}/${id}`, newObj)\n\treturn request.then(response => response.data)\n}\n\nexport default { getAll, create, update, setToken }\n","import axios from 'axios'\r\nconst baseUrl = '/api/login'\r\n\r\nconst login = async (credentials) => {\r\n\tconst response = await axios.post(baseUrl, credentials)\r\n\treturn response.data\r\n}\r\n\r\nexport default { login }","import React, { useState, useEffect } from 'react'\nimport Blog from './components/Blog'\nimport blogService from './services/blogs'\nimport loginService from './services/login'\n\nconst App = () => {\n\tconst [blogs, setBlogs] = useState([])\n\tconst [newBlog, setNewBlog] = useState('')\n\tconst [newAuthor, setNewAuthor] = useState('')\n\tconst [newUrl, setNewUrl] = useState('')\n\tconst [errorMessage, setErrorMessage] = useState(null)\n\tconst [username, setUsername] = useState('')\n\tconst [password, setPassword] = useState('')\n\tconst [user, setUser] = useState(null)\n\n  useEffect(() => {\n    blogService.getAll().then(blogs =>\n      setBlogs( blogs )\n    )  \n\t}, [])\n\n\tuseEffect(() => {\n\t\tconst loggedUserJSON = window.localStorage.getItem('loggedBlogger')\n\t\tif (loggedUserJSON) {\n\t\t\tconst user = JSON.parse(loggedUserJSON)\n\t\t\tsetUser(user)\n\t\t\tblogService.setToken(user.token)\n\t\t}\n\t}, [])\n\n\tconst logoutUser = () => {\n\t\twindow.localStorage.removeItem('loggedBlogger')\n\t\tsetUser(null)\n\t\tsetUsername('')\n\t\tsetPassword('')\n\t}\n\n\tconst loginForm = () => {\n\t\treturn (\n\t\t<form onSubmit={handleLogin}>\n\t\t\t<div>\n\t\t\t\tusername\n\t\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tvalue={username}\n\t\t\t\tname=\"Username\"\n\t\t\t\tonChange={({ target}) => setUsername(target.value)}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\tpassword\n\t\t\t\t<input\n\t\t\t\ttype=\"password\"\n\t\t\t\tvalue={password}\n\t\t\t\tname=\"Password\"\n\t\t\t\tonChange={({ target }) => setPassword(target.value)}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<button type=\"submit\">login</button>\n\t\t</form>\n\t\t)\n\t}\n\n\tconst addBlog = (newBlog, newAuthor, newUrl) => {\n\t\tconst newBlogpost = {\n\t\t\ttitle: newBlog,\n\t\t\tauthor: newAuthor,\n\t\t\turl: newUrl,\n\t\t}\n\t\tconsole.log('wants to create', newBlogpost)\n\t\tblogService.create(newBlogpost)\n\t\tsetNewUrl('')\n\t\tsetNewBlog('')\n\t\tsetNewAuthor('')\n\t\talert('lol catch')\n\t}\n\n\tconst handleBlogChange = (event) => {\n\t\tevent.preventDefault()\n\t\tsetNewBlog(event.target.value)\n\t}\n\n\tconst handleAuthorChange = (event) => {\n\t\tevent.preventDefault()\n\t\tsetNewAuthor(event.target.value)\n\t}\n\n\tconst handleUrlChange = (event) => {\n\t\tevent.preventDefault()\n\t\tsetNewUrl(event.target.value)\n\t}\n\n\tconst blogForm = () => {\n\t\tconst userJSON = window.localStorage.getItem('loggedBlogger')\n\t\tif (!userJSON) {\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\tlolxd KEIJO\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\t\tconst showUser = JSON.parse(userJSON)\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{showUser.name} logged in &nbsp;\n\t\t\t\t<button type=\"submit\" onClick={logoutUser}>logout</button>\n\t\t\t\t<form onSubmit={addBlog}>\n\t\t\t\t\ttitle\n\t\t\t\t\t<input\n\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\tvalue={newBlog}\n\t\t\t\t\t\tonChange={handleBlogChange}\n\t\t\t\t\t/><br/>\n\t\t\t\t\tauthor\n\t\t\t\t\t<input\n\t\t\t\t\t\tname=\"author\"\n\t\t\t\t\t\tvalue={newAuthor}\n\t\t\t\t\t\tonChange={handleAuthorChange}\n\t\t\t\t\t/><br/>\n\t\t\t\t\turl\n\t\t\t\t\t<input\n\t\t\t\t\t\tname=\"url\"\n\t\t\t\t\t\tvalue={newUrl}\n\t\t\t\t\t\tonChange={handleUrlChange}\n\t\t\t\t\t/><br/>\n\t\t\t\t\t<button type=\"submit\">save</button>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t)\n\t\t}\n\t\t\n\t\n\tconst handleLogin = async (event) => {\n\t\tevent.preventDefault()\n\ttry {\n\t\tconst user = await loginService.login({\n\t\t\tusername, password\n\t\t})\n\t\twindow.localStorage.setItem(\n\t\t\t'loggedBlogger', JSON.stringify(user)\n\t\t)\n\t\tblogService.setToken(user.token)\n\t\tsetUser(user)\n\t\tsetUsername('')\n\t\tsetPassword('')\n\t} catch (exception) {\n\t\tsetErrorMessage('wrong credentials')\n\t\tsetTimeout(() => {\n\t\t\tsetErrorMessage(null)\n\t\t}, 5000)\n\t}\n}\n\n  return (\n    <div>\n\t\t\t<h1>Keijon pislablogit</h1>\n\t\t\t{user === null && loginForm(username, setUsername, password, setPassword, handleLogin)}\n\t\t\t{user !== null && blogForm()}\n      <h2>blogs</h2>\n      {blogs.map(blog =>\n        <Blog key={blog.id} blog={blog} />\n      )}\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}